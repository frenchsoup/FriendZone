<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FriendZone Fantasy Football League</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prop-types/15.8.1/prop-types.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.12.7/recharts.umd.min.js"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    // Sample data (replace with fetch from JSON files)
    const sampleKeepers2024 = [
      { team: "Trudy", keeper1: "B Rob Jr", draftCost1: 2, tag1: true, cost1: 2, keeper2: "", draftCost2: 0, tag2: false, cost2: 0, remaining: 198, paid: "y" },
      { team: "Ayer", keeper1: "Chase", draftCost1: 22, tag1: true, cost1: 22, keeper2: "Taylor", draftCost2: 16, tag2: false, cost2: 22.6, remaining: 155.4, paid: "y" },
      { team: "Buck", keeper1: "Rashee Rice", draftCost1: 1, tag1: true, cost1: 1, keeper2: "", draftCost2: 0, tag2: false, cost2: 0, remaining: 199, paid: "y" },
      { team: "Byz", keeper1: "B. Hall", draftCost1: 28, tag1: true, cost1: 28, keeper2: "B. Purdy", draftCost2: 5, tag2: false, cost2: 10.5, remaining: 161.5, paid: "y" },
      { team: "Dgatz", keeper1: "CJ Stroud", draftCost1: 9, tag1: false, cost1: 14.9, keeper2: "I. Pacheco", draftCost2: 5, tag2: true, cost2: 5, remaining: 180.1, paid: "y" },
      { team: "Jordan", keeper1: "Ceedee", draftCost1: 43, tag1: true, cost1: 43, keeper2: "London", draftCost2: 13, tag2: false, cost2: 19.3, remaining: 137.7, paid: "y" },
      { team: "LeFevre", keeper1: "J Love", draftCost1: 5, tag1: true, cost1: 5, keeper2: "N Collins", draftCost2: 1, tag2: false, cost2: 6.1, remaining: 188.9, paid: "y" },
      { team: "Lewis", keeper1: "Z Flowers", draftCost1: 8, tag1: false, cost1: 13.8, keeper2: "Mike Evans", draftCost2: 10, tag2: true, cost2: 10, remaining: 176.2, paid: "y" },
      { team: "Lusa", keeper1: "Kyler", draftCost1: 10, tag1: false, cost1: 16, keeper2: "Achane", draftCost2: 0, tag2: false, cost2: 5, remaining: 179, paid: "y" },
      { team: "Mante", keeper1: "DJ Moore", draftCost1: 16, tag1: true, cost1: 16, keeper2: "", draftCost2: 0, tag2: false, cost2: 0, remaining: 184, paid: "y" },
      { team: "Tobin", keeper1: "D Swift", draftCost1: 8, tag1: false, cost1: 13.8, keeper2: "", draftCost2: 0, tag2: false, cost2: 0, remaining: 186.2, paid: "y" },
      { team: "Yacob", keeper1: "Jalen Hurts", draftCost1: 26, tag1: true, cost1: 26, keeper2: "", draftCost2: 0, tag2: false, cost2: 0, remaining: 174, paid: "y" }
    ];

    const samplePrizes2024 = {
      survivor: [
        { week: 1, eliminated: "ALef" },
        { week: 2, eliminated: "Mante" },
        { week: 3, eliminated: "Dgatz" },
        { week: 4, eliminated: "TLew" },
        { week: 5, eliminated: "Yacob" },
        { week: 6, eliminated: "Jordan" },
        { week: 7, eliminated: "Trudy" },
        { week: 8, eliminated: "Byz" },
        { week: 9, eliminated: "Ayer" },
        { week: 10, eliminated: "Tobin" },
        { week: 11, eliminated: "Lusa" },
        { week: 12, winner: "Buck" }
      ],
      weeklyHighScores: [
        { week: 1, team: "Tobin", total: 151.36 },
        { week: 2, team: "Lusa", total: 174.58 },
        { week: 3, team: "Ayer", total: 152.22 },
        { week: 4, team: "Ayer", total: 161.76 },
        { week: 5, team: "Trudy", total: 157.08 },
        { week: 6, team: "Tobin", total: 175.98 },
        { week: 7, team: "Ayer", total: 147 },
        { week: 8, team: "Dgatz", total: 174.56 },
        { week: 9, team: "Tlew", total: 190.52 },
        { week: 10, team: "Buck", total: 131.86 },
        { week: 11, team: "Ayer", total: 155.82 },
        { week: 12, team: "Mante", total: 174.22 },
        { week: 13, team: "Tobin", total: 170.9 }
      ]
    };

    // Keeper cost calculation
    const calculateKeeperCost = (draftCost, tag) => {
      if (draftCost === 0) return 0;
      if (tag) return draftCost;
      return (draftCost * 1.1) + 5;
    };

    // Main App component
    const App = () => {
      const [currentTab, setCurrentTab] = React.useState('home');
      const [adminPassword, setAdminPassword] = React.useState('');
      const [isAdminAuthenticated, setIsAdminAuthenticated] = React.useState(false);
      const [keepers2024, setKeepers2024] = React.useState(sampleKeepers2024);
      const [prizes2024, setPrizes2024] = React.useState(samplePrizes2024);
      const [selectedYear, setSelectedYear] = React.useState('2024');

      // Hardcoded password for simplicity (replace with environment variable in production)
      const ADMIN_PASSWORD = 'friendzone2025';

      // Handle admin login
      const handleAdminLogin = (e) => {
        e.preventDefault();
        if (adminPassword === ADMIN_PASSWORD) {
          setIsAdminAuthenticated(true);
        } else {
          alert('Incorrect password');
        }
      };

      // Handle adding a new keeper
      const handleAddKeeper = (e) => {
        e.preventDefault();
        const team = e.target.team.value;
        const keeper1 = e.target.keeper1.value;
        const draftCost1 = parseFloat(e.target.draftCost1.value) || 0;
        const tag1 = e.target.tag1.checked;
        const cost1 = calculateKeeperCost(draftCost1, tag1);
        const keeper2 = e.target.keeper2.value;
        const draftCost2 = parseFloat(e.target.draftCost2.value) || 0;
        const tag2 = e.target.tag2.checked;
        const cost2 = calculateKeeperCost(draftCost2, tag2);
        const remaining = 200 - (cost1 + cost2);
        const newKeeper = { team, keeper1, draftCost1, tag1, cost1, keeper2, draftCost2, tag2, cost2, remaining, paid: "y" };
        setKeepers2024([...keepers2024, newKeeper]);
        e.target.reset();
        // TODO: Call Netlify function to update keepers_2024.json via GitHub API
      };

      // Handle adding a new weekly high score
      const handleAddWeeklyScore = (e) => {
        e.preventDefault();
        const week = parseInt(e.target.week.value);
        const team = e.target.team.value;
        const total = parseFloat(e.target.total.value);
        setPrizes2024({
          ...prizes2024,
          weeklyHighScores: [...prizes2024.weeklyHighScores, { week, team, total }]
        });
        e.target.reset();
        // TODO: Call Netlify function to update prizes_2024.json via GitHub API
      };

      return (
        <div className="min-h-screen bg-gray-100 font-sans">
          <nav className="bg-blue-800 text-white p-4 shadow-md">
            <div className="container mx-auto flex justify-between items-center">
              <h1 className="text-2xl font-bold">FriendZone Fantasy Football</h1>
              <ul className="flex space-x-6">
                <li><button onClick={() => setCurrentTab('home')} className="hover:underline focus:outline-none">Home</button></li>
                <li><button onClick={() => setCurrentTab('rules')} className="hover:underline focus:outline-none">Rules</button></li>
                <li><button onClick={() => setCurrentTab('payouts')} className="hover:underline focus:outline-none">Payouts</button></li>
                <li><button onClick={() => setCurrentTab('keepers')} className="hover:underline focus:outline-none">Keepers</button></li>
                <li><button onClick={() => setCurrentTab('prizes')} className="hover:underline focus:outline-none">Prizes</button></li>
                <li><button onClick={() => setCurrentTab('admin')} className="hover:underline focus:outline-none">Admin</button></li>
              </ul>
            </div>
          </nav>
          <main className="container mx-auto p-6">
            {currentTab === 'home' && (
              <div className="bg-white rounded-lg shadow p-6">
                <h2 className="text-3xl font-bold text-gray-800 mb-4">Welcome to FriendZone Fantasy Football</h2>
                <p className="text-lg text-gray-600">Your longtime fantasy football league, now online! Explore rules, payouts, keepers, and weekly prizes for the 2025 season and beyond.</p>
              </div>
            )}
            {currentTab === 'rules' && (
              <div className="bg-white rounded-lg shadow p-6">
                <h2 className="text-2xl font-bold text-gray-800 mb-4">Rules</h2>
                <p className="text-gray-600">FAAB cost, keeper price, and TE premium rules will be displayed here once data is loaded from rules.json.</p>
              </div>
            )}
            {currentTab === 'payouts' && (
              <div className="bg-white rounded-lg shadow p-6">
                <h2 className="text-2xl font-bold text-gray-800 mb-4">Payouts</h2>
                <p className="text-gray-600">Payout structure (e.g., Playoff Champ, Weekly High Score) will be displayed here once data is loaded from payouts.json.</p>
              </div>
            )}
            {currentTab === 'keepers' && (
              <div className="bg-white rounded-lg shadow p-6">
                <h2 className="text-2xl font-bold text-gray-800 mb-4">Keepers</h2>
                <div className="flex space-x-4 mb-4">
                  <button className={`px-4 py-2 rounded ${selectedYear === '2022' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'}`} onClick={() => setSelectedYear('2022')}>2022</button>
                  <button className={`px-4 py-2 rounded ${selectedYear === '2023' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'}`} onClick={() => setSelectedYear('2023')}>2023</button>
                  <button className={`px-4 py-2 rounded ${selectedYear === '2024' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'}`} onClick={() => setSelectedYear('2024')}>2024</button>
                  <button className={`px-4 py-2 rounded ${selectedYear === '2025' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'}`} onClick={() => setSelectedYear('2025')}>2025</button>
                </div>
                {selectedYear === '2024' && (
                  <table className="w-full mb-4 border-collapse">
                    <thead>
                      <tr className="bg-gray-200">
                        <th className="border p-2">Team</th>
                        <th className="border p-2">Keeper #1</th>
                        <th className="border p-2">Draft Cost</th>
                        <th className="border p-2">Tag</th>
                        <th className="border p-2">Cost</th>
                        <th className="border p-2">Keeper #2</th>
                        <th className="border p-2">Draft Cost</th>
                        <th className="border p-2">Tag</th>
                        <th className="border p-2">Cost</th>
                        <th className="border p-2">Remaining</th>
                        <th className="border p-2">Paid</th>
                      </tr>
                    </thead>
                    <tbody>
                      {keepers2024.map((keeper, index) => (
                        <tr key={index} className="hover:bg-gray-100">
                          <td className="border p-2">{keeper.team}</td>
                          <td className="border p-2">{keeper.keeper1}</td>
                          <td className="border p-2">{keeper.draftCost1}</td>
                          <td className="border p-2">{keeper.tag1 ? 'Yes' : 'No'}</td>
                          <td className="border p-2">{keeper.cost1.toFixed(1)}</td>
                          <td className="border p-2">{keeper.keeper2}</td>
                          <td className="border p-2">{keeper.draftCost2}</td>
                          <td className="border p-2">{keeper.tag2 ? 'Yes' : 'No'}</td>
                          <td className="border p-2">{keeper.cost2.toFixed(1)}</td>
                          <td className="border p-2">{keeper.remaining.toFixed(1)}</td>
                          <td className="border p-2">{keeper.paid}</td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                )}
                {selectedYear !== '2024' && <p className="text-gray-600">Keeper data for {selectedYear} will be displayed here once loaded from JSON.</p>}
              </div>
            )}
            {currentTab === 'prizes' && (
              <div className="bg-white rounded-lg shadow p-6">
                <h2 className="text-2xl font-bold text-gray-800 mb-4">Prizes</h2>
                <div className="flex space-x-4 mb-4">
                  <button className={`px-4 py-2 rounded ${selectedYear === '2023' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'}`} onClick={() => setSelectedYear('2023')}>2023</button>
                  <button className={`px-4 py-2 rounded ${selectedYear === '2024' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'}`} onClick={() => setSelectedYear('2024')}>2024</button>
                  <button className={`px-4 py-2 rounded ${selectedYear === '2025' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-800'}`} onClick={() => setSelectedYear('2025')}>2025</button>
                </div>
                {selectedYear === '2024' && (
                  <>
                    <h3 className="text-xl font-semibold text-gray-800 mb-2">Weekly High Scores</h3>
                    <table className="w-full mb-4 border-collapse">
                      <thead>
                        <tr className="bg-gray-200">
                          <th className="border p-2">Week</th>
                          <th className="border p-2">Team</th>
                          <th className="border p-2">Total</th>
                        </tr>
                      </thead>
                      <tbody>
                        {prizes2024.weeklyHighScores.map((score, index) => (
                          <tr key={index} className="hover:bg-gray-100">
                            <td className="border p-2">{score.week}</td>
                            <td className="border p-2">{score.team}</td>
                            <td className="border p-2">{score.total}</td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                    <h3 className="text-xl font-semibold text-gray-800 mb-2">Survivor</h3>
                    <table className="w-full mb-4 border-collapse">
                      <thead>
                        <tr className="bg-gray-200">
                          <th className="border p-2">Week</th>
                          <th className="border p-2">Eliminated</th>
                        </tr>
                      </thead>
                      <tbody>
                        {prizes2024.survivor.map((entry, index) => (
                          <tr key={index} className="hover:bg-gray-100">
                            <td className="border p-2">{entry.week || (entry.winner && 'Winner')}</td>
                            <td className="border p-2">{entry.eliminated || entry.winner}</td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                    <h3 className="text-xl font-semibold text-gray-800 mb-2">Weekly High Scores Chart</h3>
                    <div className="h-64">
                      <window.Recharts.ResponsiveContainer width="100%" height="100%">
                        <window.Recharts.BarChart data={prizes2024.weeklyHighScores}>
                          <window.Recharts.CartesianGrid strokeDasharray="3 3" />
                          <window.Recharts.XAxis dataKey="week" />
                          <window.Recharts.YAxis />
                          <window.Recharts.Tooltip />
                          <window.Recharts.Legend />
                          <window.Recharts.Bar dataKey="total" fill="#2563eb" name="Score" />
                        </window.Recharts.BarChart>
                      </window.Recharts.ResponsiveContainer>
                    </div>
                  </>
                )}
                {selectedYear !== '2024' && <p className="text-gray-600">Prize data for {selectedYear} will be displayed here once loaded from JSON.</p>}
              </div>
            )}
            {currentTab === 'admin' && (
              <div className="bg-white rounded-lg shadow p-6">
                <h2 className="text-2xl font-bold text-gray-800 mb-4">Admin</h2>
                {!isAdminAuthenticated ? (
                  <div className="max-w-md mx-auto">
                    <h3 className="text-lg font-semibold text-gray-800 mb-2">Admin Login</h3>
                    <form onSubmit={handleAdminLogin} className="space-y-4">
                      <input
                        type="password"
                        value={adminPassword}
                        onChange={(e) => setAdminPassword(e.target.value)}
                        placeholder="Enter admin password"
                        className="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-600"
                      />
                      <button type="submit" className="w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                        Login
                      </button>
                    </form>
                  </div>
                ) : (
                  <div className="space-y-8">
                    <div>
                      <h3 className="text-lg font-semibold text-gray-800 mb-2">Add Keeper (2025)</h3>
                      <form onSubmit={handleAddKeeper} className="space-y-4 max-w-md">
                        <input
                          type="text"
                          name="team"
                          placeholder="Team"
                          className="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-600"
                          required
                        />
                        <input
                          type="text"
                          name="keeper1"
                          placeholder="Keeper #1"
                          className="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-600"
                        />
                        <input
                          type="number"
                          name="draftCost1"
                          placeholder="Draft Cost #1"
                          step="0.1"
                          className="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-600"
                        />
                        <label className="flex items-center space-x-2">
                          <input type="checkbox" name="tag1" className="h-4 w-4" />
                          <span>Tag #1</span>
                        </label>
                        <input
                          type="text"
                          name="keeper2"
                          placeholder="Keeper #2"
                          className="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-600"
                        />
                        <input
                          type="number"
                          name="draftCost2"
                          placeholder="Draft Cost #2"
                          step="0.1"
                          className="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-600"
                        />
                        <label className="flex items-center space-x-2">
                          <input type="checkbox" name="tag2" className="h-4 w-4" />
                          <span>Tag #2</span>
                        </label>
                        <button type="submit" className="w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                          Add Keeper
                        </button>
                      </form>
                    </div>
                    <div>
                      <h3 className="text-lg font-semibold text-gray-800 mb-2">Add Weekly High Score (2025)</h3>
                      <form onSubmit={handleAddWeeklyScore} className="space-y-4 max-w-md">
                        <input
                          type="number"
                          name="week"
                          placeholder="Week"
                          className="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-600"
                          required
                        />
                        <input
                          type="text"
                          name="team"
                          placeholder="Team"
                          className="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-600"
                          required
                        />
                        <input
                          type="number"
                          name="total"
                          placeholder="Total Score"
                          step="0.01"
                          className="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-600"
                          required
                        />
                        <button type="submit" className="w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                          Add Score
                        </button>
                      </form>
                    </div>
                    <p className="text-gray-600 mt-4">Additional admin forms for survivor, rules, and payouts will be added here.</p>
                  </div>
                )}
              </div>
            )}
          </main>
        </div>
      );
    };

    // Render the app
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
